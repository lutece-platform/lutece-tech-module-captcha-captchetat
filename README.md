![](https://dev.lutece.paris.fr/jenkins/buildStatus/icon?job=module-captcha-captchetat-deploy)
[![Alerte](https://dev.lutece.paris.fr/sonar/api/project_badges/measure?project=fr.paris.lutece.plugins%3Amodule-captcha-captchetat&metric=alert_status)](https://dev.lutece.paris.fr/sonar/dashboard?id=fr.paris.lutece.plugins%3Amodule-captcha-captchetat)
[![Line of code](https://dev.lutece.paris.fr/sonar/api/project_badges/measure?project=fr.paris.lutece.plugins%3Amodule-captcha-captchetat&metric=ncloc)](https://dev.lutece.paris.fr/sonar/dashboard?id=fr.paris.lutece.plugins%3Amodule-captcha-captchetat)
[![Coverage](https://dev.lutece.paris.fr/sonar/api/project_badges/measure?project=fr.paris.lutece.plugins%3Amodule-captcha-captchetat&metric=coverage)](https://dev.lutece.paris.fr/sonar/dashboard?id=fr.paris.lutece.plugins%3Amodule-captcha-captchetat)

# Module Captcha CaptchEtat

This module integrates the French State's **CaptchEtat** service (via PISTE API) into Lutece. It replaces the default Lutece captcha to provide a more accessible and secure solution.

## Features

 
* Standard visual captcha generation via PISTE API.
* Audio captcha support for accessibility.
* Server-side validation of the answer.
* OAuth2 Authentication (Client Credentials) handling for PISTE security.

# Configuration

You must configure the API keys provided by the PISTE platform in the file `WEB-INF/conf/plugins/captchetat.properties` .

 `# PISTE API Configuration` 

 `captchetat.api.url=https://sandbox-api.piste.gouv.fr/piste/captchetat/v2` 

 `# OAuth2 Authentication (PISTE)` 

 `captchetat.security.token.url=https://sandbox-oauth.piste.gouv.fr/api/oauth/token` 

 `captchetat.security.client_id=VOTRE_CLIENT_ID` 

 `captchetat.security.client_secret=VOTRE_CLIENT_SECRET` 

# Activation (Datastore)

This module acts as a provider for the **Captcha** plugin. To enable it, you must configure the default provider in the **Datastore** (do not modify properties files directly).

In the Back Office, go to **System > Properties Management (Datastore)** and set the following key:

 
*  **Key:**  `captcha.defaultProvider` 
*  **Value:**  `captchetat` 

If the key does not exist, create it. Once set, all standard Lutece captchas will switch to CaptchEtat.


[Maven documentation and reports](https://dev.lutece.paris.fr/plugins/module-captcha-captchetat/)



 *generated by [xdoc2md](https://github.com/lutece-platform/tools-maven-xdoc2md-plugin) - do not edit directly.*